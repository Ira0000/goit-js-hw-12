{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// import axios from 'axios';\n\n// const myApiKey = '45153931-2470322a6efc3ba9ceddb2cb4';\n// axios.defaults.baseURL = 'https://pixabay.com';\n\nfunction fetchImages(searchValue, pageShown, perPage) {\n  return axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '45153931-2470322a6efc3ba9ceddb2cb4',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      q: searchValue,\n      per_page: perPage,\n      page: pageShown,\n    },\n  });\n}\n\nexport default fetchImages;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery = new SimpleLightbox('.img-list a', {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nfunction renderPhotoes(photos, imgList) {\n  const markup = photos\n    .map(photo => {\n      return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n            <img\n            class=\"gallery-img\"\n            src=\"${photo.webformatURL}\"\n            data-source=\"${photo.largeImageURL}\"\n            alt=\"${photo.tags}\">\n            </a>\n            <div class=\"img-description\">\n              <p class=\"description-text\">Likes <span class=\"description-value\"> ${photo.likes}</span></p>\n              <p class=\"description-text\">Views <span class=\"description-value\"> ${photo.views}</span></p>\n              <p class=\"description-text\">Comments <span class=\"description-value\"> ${photo.comments}</span></p>\n              <p class=\"description-text\">Downloads <span class=\"description-value\"> ${photo.downloads}</span></p>\n            </div>\n              </li>`;\n    })\n    .join('');\n  //   console.log(markup);\n\n  imgList.insertAdjacentHTML('beforeend', markup);\n\n  gallery.on('show.simplelightbox', function () {});\n  gallery.refresh();\n}\n\nexport default renderPhotoes;","import fetchImages from './js/pixabay-api.js';\nimport renderPhotoes from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchField = document.querySelector('.search-input');\nconst imgList = document.querySelector('.img-list');\n// const photoesContainer = document.querySelector('.img-section');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n// const downloadStatus = '<div class=\"loader\"></div>';\n// photoesContainer.insertAdjacentHTML('afterbegin', downloadStatus);\n//   const loader = document.querySelector('.loader');\n\nfunction showErrorToastMessage(message) {\n  iziToast.error({\n    message: message,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#fff',\n    iconColor: '#fff',\n    icon: 'fa-regular fa-circle-xmark',\n    progressBarColor: '#B51B1B',\n    maxWidth: 432,\n    messageSize: '16',\n  });\n}\n\nlet pageShown = 1;\nconst perPage = 15;\nlet maxPage;\n\nclass ButtonService {\n  constructor(buttonEL, hiddenClass) {\n    this.buttonEL = buttonEL;\n    this.hiddenClass = hiddenClass;\n  }\n\n  hide() {\n    this.buttonEL.classList.add(this.hiddenClass);\n  }\n\n  show() {\n    this.buttonEL.classList.remove(this.hiddenClass);\n  }\n\n  disable() {\n    this.buttonEL.disabled = true;\n  }\n\n  enable() {\n    this.buttonEL.disabled = false;\n  }\n}\n\nconst loadButton = new ButtonService(loadMoreBtn, \"is-hidden\")\nloadButton.hide();\n\nsearchForm.addEventListener('submit', handleSearch);\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  imgList.innerHTML = '';\n\n  const searchValue = searchField.value.trim();\n\n\n  if (searchValue === '') {\n    showErrorToastMessage('Please fill the search field!');\n    return;\n  } else {\n    pageShown = 1;\n \n\n\n    try {\n      const response = await fetchImages(searchValue, pageShown, perPage);\n      const photos = response.data.hits;\n      const totalImages = response.data.total;\n\n        maxPage = Math.ceil(totalImages / perPage);\n        console.log(maxPage);\n\n        if (totalImages > 0) {\n          loadButton.show();\n    loadButton.disable();\n          renderPhotoes(photos, imgList);\n        } else {\n        showErrorToastMessage('Sorry, there are no images matching your search query. Please try again!');\n        }\n        if (maxPage > 1) {\n          loadButton.enable();\n          loadMoreBtn.addEventListener('click', handleLoadMore);\n        } else {\n          loadButton.hide();\n        }\n      } \n      catch (err) {\n      console.log(`Помилка під час запиту: ${err.message}`);\n    } finally {\n      event.currentTarget.reset();\n    }\n  }\n}\n\n\nasync function handleLoadMore() {\n  loadButton.disable();\n  pageShown++;\n\n  try {\n    const response = await fetchImages(searchField.value.trim(), pageShown, perPage);\n    const photos = response.data.hits;\n    renderPhotoes(photos, imgList);\n  } catch (err) {\n    console.error(`Error during request: ${err.message}`);\n  }\n  finally{\n    if (pageShown === maxPage) {\n      loadButton.hide();\n      loadMoreBtn.removeEventListener('click', handleLoadMore);\n    } else {\n      loadButton.enable();\n    }\n  }\n}"],"names":["fetchImages","searchValue","pageShown","perPage","gallery","SimpleLightbox","renderPhotoes","photos","imgList","markup","photo","searchForm","searchField","loadMoreBtn","showErrorToastMessage","message","iziToast","maxPage","ButtonService","buttonEL","hiddenClass","loadButton","handleSearch","event","response","totalImages","handleLoadMore","err"],"mappings":"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"}